<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <title>500 ì—ëŸ¬ - ErrorShop</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { background:#0d1117; color:#c9d1d9; font-family:'Courier New',monospace; }
    nav {
      background:#161b22; padding:16px 32px;
      display:flex; justify-content:space-between; align-items:center;
      border-bottom:1px solid #30363d;
    }
    nav .logo { color:#f97316; font-size:1.2rem; font-weight:bold; }
    nav a { color:#8b949e; text-decoration:none; font-size:0.85rem; }
    nav a:hover { color:#f97316; }
    .container { max-width:900px; margin:40px auto; padding:0 24px 60px; }
    h1 { color:#f85149; font-size:1.3rem; margin-bottom:8px; }
    .sub { color:#8b949e; font-size:0.85rem; margin-bottom:28px; }
    .error-card {
      background:#161b22; border:1px solid #f85149;
      border-radius:8px; padding:24px; margin-bottom:20px;
    }
    .error-card h2 { color:#f85149; font-size:0.9rem; margin-bottom:12px; }
    .error-val {
      background:#010409; border:1px solid #30363d;
      border-radius:6px; padding:12px 16px;
      font-size:0.8rem; color:#f59e0b;
      word-break:break-all; line-height:1.8; white-space:pre-wrap;
    }
    .schema-card {
      background:#161b22; border:1px solid #f59e0b;
      border-radius:8px; padding:24px; margin-bottom:20px;
    }
    .schema-card h2 { color:#f59e0b; font-size:0.9rem; margin-bottom:12px; }
    .schema-val {
      background:#010409; border:1px solid #30363d;
      border-radius:6px; padding:12px 16px;
      font-size:0.82rem; color:#f59e0b; line-height:1.8;
    }
    .flag-box {
      background:#0f2a1a; border:1px solid #238636;
      border-radius:10px; padding:28px;
      text-align:center; margin-bottom:24px;
    }
    .flag-box h2 { color:#3fb950; font-size:1.1rem; margin-bottom:14px; }
    .flag-val {
      background:#0d1117; border:1px dashed #238636;
      padding:14px 20px; border-radius:6px;
      color:#3fb950; font-size:1rem;
      letter-spacing:1px; word-break:break-all;
    }
    .info {
      background:#161b22; border:1px solid #30363d;
      border-radius:8px; padding:24px;
    }
    .info h3 { color:#f0f6fc; margin-bottom:16px; font-size:0.95rem; }
    .info ul { list-style:none; }
    .info li {
      padding:10px 0; border-bottom:1px solid #21262d;
      font-size:0.85rem; color:#8b949e; line-height:1.6;
    }
    .info li:last-child { border-bottom:none; }
    .vuln { color:#f85149; }
    .fix  { color:#3fb950; }
  </style>
</head>
<body>
<nav>
  <span class="logo">ğŸ›’ ErrorShop</span>
  <a href="/">â† ëª©ë¡ìœ¼ë¡œ</a>
</nav>
<div class="container">
  <h1>âš ï¸ 500 Internal Server Error</h1>
  <p class="sub">ì„œë²„ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>

  {% if detail.error %}
  <div class="error-card">
    <h2>âŒ ì—ëŸ¬ ë©”ì‹œì§€</h2>
    <div class="error-val">{{ detail.error }}</div>
  </div>
  {% endif %}

  {% if detail.query %}
  <div class="error-card">
    <h2>ğŸ—„ï¸ ì‹¤í–‰ëœ SQL ì¿¼ë¦¬</h2>
    <div class="error-val">{{ detail.query }}</div>
  </div>
  {% endif %}

  {% if detail.db_schema %}
  <div class="schema-card">
    <h2>ğŸ“‹ DB ìŠ¤í‚¤ë§ˆ (ë‚´ë¶€ ì •ë³´ ë…¸ì¶œ)</h2>
    <div class="schema-val">
      í…Œì´ë¸”: {{ detail.db_schema }}<br/>
      DB ê²½ë¡œ: {{ detail.db_path }}<br/>
      íŒíŠ¸: {{ detail.hint }}
    </div>
  </div>
  {% endif %}

  {% if detail.traceback %}
  <div class="error-card">
    <h2>ğŸ” ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤</h2>
    <div class="error-val">{{ detail.traceback }}</div>
  </div>
  {% endif %}

  <div class="flag-box">
    <h2>ğŸš© ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ ë‚´ë¶€ ì •ë³´ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤!</h2>
    <p style="color:#8b949e; font-size:0.85rem; margin-bottom:14px">
      secret ì»¬ëŸ¼ì„ ì§ì ‘ ì¡°íšŒí•´ë³´ì„¸ìš”: <code style="color:#3fb950">/product?id=1 UNION SELECT id,name,price,secret FROM products WHERE id=1</code>
    </p>
    <div class="flag-val" id="flagVal">â†‘ ìœ„ URLë¡œ ì ‘ì†í•˜ë©´ í”Œë˜ê·¸ë¥¼ íšë“í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</div>
  </div>

  <div class="info">
    <h3>ğŸ” ì–´ë–¤ ì·¨ì•½ì ì´ ìˆì—ˆë‚˜ìš”?</h3>
    <ul>
      <li><span class="vuln">[ì·¨ì•½ì ]</span> ì˜ˆì™¸ ë°œìƒ ì‹œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤, DB ê²½ë¡œ, ìŠ¤í‚¤ë§ˆ ë“± ë‚´ë¶€ ì •ë³´ê°€ ê·¸ëŒ€ë¡œ ë…¸ì¶œë˜ì—ˆìŠµë‹ˆë‹¤.</li>
      <li><span class="vuln">[ì·¨ì•½ì ]</span> ì—ëŸ¬ ë©”ì‹œì§€ì—ì„œ DB êµ¬ì¡°ë¥¼ íŒŒì•…í•´ ì¶”ê°€ ê³µê²©(SQL Injection)ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤.</li>
      <li><span class="fix">[ëŒ€ì‘ë°©ì•ˆ]</span> í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì‚¬ìš©ìì—ê²Œ ì¼ë°˜ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë§Œ í‘œì‹œí•˜ì„¸ìš”.</li>
      <li><span class="fix">[ëŒ€ì‘ë°©ì•ˆ]</span> ìƒì„¸ ì—ëŸ¬ëŠ” ì„œë²„ ë‚´ë¶€ ë¡œê·¸ì—ë§Œ ê¸°ë¡í•˜ê³  ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”.</li>
      <li><span class="fix">[ëŒ€ì‘ë°©ì•ˆ]</span> try/except ì—ì„œ ì˜ˆì™¸ë¥¼ ì ì ˆíˆ ì²˜ë¦¬í•˜ê³  ë¯¼ê° ì •ë³´ë¥¼ ìˆ¨ê¸°ì„¸ìš”.</li>
    </ul>
  </div>
</div>
</body>
</html>